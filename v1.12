-- Services
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

-- Remotes
local FireGunRemote     = ReplicatedStorage.RemoteEvents.FireGunRemote
local WhiteBlowRemote   = ReplicatedStorage.RemoteEvents.WhiteBlowRemote
local ItemRemote        = ReplicatedStorage.RemoteEvents.ItemRemote
local ItemStorageRemote = ReplicatedStorage.RemoteEvents.ItemStorageRemote
local BagStorageRemote  = ReplicatedStorage.RemoteEvents.BagStorageRemote
local BladeCombatRemote = ReplicatedStorage.RemoteEvents.BladeCombatRemote
local ManaChargeRemote  = ReplicatedStorage.RemoteEvents.ManaChargeRemote

-- State
local fireGun = false
local whiteBlow = false
local melee = false
local manaActive = false
local freezePlayer = false
local gokuFarm = false
local gonKillFarm = false
local shrine = false
local chestTimerRunning = false
local cooldown = 0.03
local currentTab = "Main"
local savedGokuPosition, savedGonKillPosition = nil, nil

-- Themes
local themes = {
    Default = {bg=Color3.fromRGB(40,40,40), btn=Color3.fromRGB(90,90,90)},
    Ocean   = {bg=Color3.fromRGB(0,85,127), btn=Color3.fromRGB(0,170,255)},
    Crimson = {bg=Color3.fromRGB(85,0,0),   btn=Color3.fromRGB(170,0,0)},
    Lime    = {bg=Color3.fromRGB(50,100,50), btn=Color3.fromRGB(120,255,100)},
    Violet  = {bg=Color3.fromRGB(70,40,100), btn=Color3.fromRGB(170,80,255)},
    RGB     = {bg=Color3.new(1,1,1),         btn=Color3.new(1,1,1)},
}

-- Player & saved
local player = Players.LocalPlayer
local savedTheme = player:GetAttribute("GuiTheme") or "RGB"
currentTab = player:GetAttribute("GuiTab") or "Main"
local currentTheme = savedTheme

-- ScreenGui
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "RemoteControlGui"
screenGui.ResetOnSpawn = false  -- persist across deaths

-- Play ding
local ding = Instance.new("Sound", screenGui)
ding.SoundId = "rbxassetid://12222124"
ding.Volume = 1
ding:Play()

-- Splash
local splash = Instance.new("TextLabel", screenGui)
splash.Size = UDim2.new(0,800,0,100)
splash.Position = UDim2.new(0.5, -400, 0.4, -50)
splash.Text = "Brought to you by : Abyss"
splash.Font = Enum.Font.GothamBold
splash.TextSize = 48
splash.BackgroundColor3 = Color3.new(0,0,0)
splash.BackgroundTransparency = 0.8
spawn(function()
    local hue = 0
    while splash.Parent do
        hue = (hue + 0.05) % 1
        splash.TextColor3 = Color3.fromHSV(hue,1,1)
        task.wait(0.05)
    end
end)
delay(5, function() splash:Destroy() end)

-- Main frame
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0,360,0,338) -- extended height by 8px
frame.Position = UDim2.new(0,20,0,250)
frame.BackgroundColor3 = themes[currentTheme].bg
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,16)
frame.Position = UDim2.new(0,20,0,250)
frame.BackgroundColor3 = themes[currentTheme].bg
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,16)

-- Border
local stroke = Instance.new("UIStroke", frame)
stroke.Color = Color3.fromRGB(255,0,255)
stroke.Thickness = 5
stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
spawn(function()
    local t,dir = 0.5, 0.01
    while frame.Parent do
        t = t + dir
        if t >= 0.8 or t <= 0.2 then dir = -dir end
        stroke.Transparency = t
        task.wait(0.05)
    end
end)

-- Attribution
local attr = Instance.new("TextLabel", frame)
attr.AnchorPoint = Vector2.new(1,1)
attr.Position = UDim2.new(1,-10,1,-10)
attr.Size = UDim2.new(0,120,0,20)
attr.Text = "@400Abyss"
attr.Font = Enum.Font.Gotham
attr.TextSize = 14
attr.TextColor3 = Color3.new(0,0,0)
attr.BackgroundTransparency = 1

-- Minimize
local minBtn = Instance.new("TextButton", screenGui)
minBtn.Size = UDim2.new(0,30,0,30)
minBtn.Position = UDim2.new(0,380,0,250)
minBtn.Text = "🔽"
minBtn.Font = Enum.Font.GothamBold
minBtn.TextSize = 18
minBtn.BackgroundColor3 = themes[currentTheme].btn
minBtn.Active = true
minBtn.Draggable = true
minBtn.MouseButton1Click:Connect(function()
    local vis = not frame.Visible
    frame.Visible = vis
    minBtn.Text = vis and "🔽" or "🔼"
end)

-- Tabs
local tabFrame = Instance.new("Frame", frame)
tabFrame.Size = UDim2.new(1,0,0,30)
tabFrame.Position = UDim2.new(0,0,0,0)
tabFrame.BackgroundColor3 = themes[currentTheme].bg
Instance.new("UICorner", tabFrame).CornerRadius = UDim.new(0,16)

local tabNames = {"Main","Quest","Duping","Themes","Misc.","Drops"}
local pages, tabs = {}, {}
local tabCount = #tabNames
for i, name in ipairs(tabNames) do
    local btn = Instance.new("TextButton", tabFrame)
    btn.Size = UDim2.new(1/tabCount, 0, 0, 30)
    btn.Position = UDim2.new((i-1)/tabCount, 0, 0, 0)
    btn.Text = name
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.BackgroundColor3 = Color3.new(0,0,0)
    btn.TextColor3 = Color3.new(1,1,1)
    btn.MouseButton1Click:Connect(function()
        currentTab = name
        player:SetAttribute("GuiTab", name)
        updateTabs()
    end)
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0, 8)
    tabs[name] = btn

    local page = Instance.new("Frame", frame)
    page.Name = name
    page.Size = UDim2.new(1,0,1,-30)
    page.Position = UDim2.new(0,0,0,30)
    page.BackgroundTransparency = 1
    pages[name] = page
end
function updateTabs()
    for n,p in pairs(pages) do
        p.Visible = (n == currentTab)
        tabs[n].BackgroundColor3 = themes[currentTheme].btn
    end
    tabs[currentTab].BackgroundColor3 = themes[currentTheme].bg
end
updateTabs()

-- RGB Animation
spawn(function()
    local hue = 0
    while true do
        if currentTheme == "RGB" then
            hue = (hue + 0.005) % 1
            local col = Color3.fromHSV(hue,1,1)
            frame.BackgroundColor3    = col
            minBtn.BackgroundColor3   = col
            tabFrame.BackgroundColor3 = col
            for _,b in pairs(tabs) do b.BackgroundColor3 = col end
        end
        task.wait(0.03)
    end
end)

-- Main Tab
    do
        local m = pages.Main
        -- make the main tab scrollable
        local scrollMain = Instance.new("ScrollingFrame", m)
        -- leave top and bottom draggable margins (28px each)
        scrollMain.Position = UDim2.new(0, 0, 0, 28)
        scrollMain.Size = UDim2.new(1, 0, 1, -56)
        scrollMain.BackgroundTransparency = 1
        scrollMain.ScrollBarThickness = 6
        scrollMain.Active = true
        scrollMain.ZIndex = 1
        local uiList = Instance.new("UIListLayout", scrollMain)
        uiList.SortOrder = Enum.SortOrder.LayoutOrder
        uiList.Padding = UDim.new(0, 4)

        local function mkToggle(txt, ref)
            local container = Instance.new("Frame", scrollMain)
            container.Size = UDim2.new(1, 0, 0, 30)
            container.BackgroundTransparency = 1

            local lbl = Instance.new("TextLabel", container)
            lbl.Size = UDim2.new(0.7, 0, 1, 0)
            lbl.Position = UDim2.new(0, 0, 0, 0)
            lbl.Text = txt
            lbl.Font = Enum.Font.GothamBold
            lbl.TextSize = 14
            lbl.TextColor3 = Color3.new(1, 1, 1)
            lbl.BackgroundColor3 = Color3.new(0, 0, 0)
            lbl.BackgroundTransparency = 0.9

            local btn = Instance.new("TextButton", container)
            btn.Size = UDim2.new(0.3, 0, 1, 0)
            btn.Position = UDim2.new(0.7, 0, 0, 0)
            btn.Font = Enum.Font.GothamBold
            btn.TextSize = 18
            btn.BackgroundColor3 = themes[currentTheme].btn
            btn.Text = "❌"

            btn.MouseButton1Click:Connect(function()
                local state = (btn.Text == "❌")
                btn.Text = state and "✅" or "❌"
                if ref == "fire" then
                    fireGun = state
                elseif ref == "white" then
                    whiteBlow = state
                elseif ref == "melee" then
                    melee = state
                elseif ref == "freeze" then
                    freezePlayer = state
                    local character = player.Character or player.CharacterAdded:Wait()
                    local hrp = character:FindFirstChild("HumanoidRootPart")
                    if hrp then hrp.Anchored = state end
                elseif ref == "shrine" then
                    shrine = state
                elseif ref == "gokuFarm" then
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if state then
                        if hrp then savedGokuPosition = hrp.CFrame end
                        gokuFarm = true
                    else
                        if hrp and savedGokuPosition then hrp.CFrame = savedGokuPosition end
                        gokuFarm = false
                    end
                elseif ref == "gonkill" then
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if state then
                        if hrp then savedGonKillPosition = hrp.CFrame end
                        gonKillFarm = true
                    else
                        if hrp and savedGonKillPosition then hrp.CFrame = savedGonKillPosition end
                        gonKillFarm = false
                    end
                end
            end)
        end

        mkToggle("FireGun", "fire")
        mkToggle("WhiteBlow", "white")
        mkToggle("melee", "melee")
        mkToggle("FrzPlr", "freeze")
        mkToggle("GokuFarm", "gokuFarm")
        mkToggle("Gon&Kill farm", "gonkill")
        mkToggle("Shrine", "shrine")
    end
-- Ensure freeze persists on respawn
player.CharacterAdded:Connect(function(char)
    local hrp = char:WaitForChild("HumanoidRootPart", 10)
    if hrp and freezePlayer then
        hrp.Anchored = true
    end
end)

-- Duping Tab
do
    local d = pages.Duping
    local function makeBtn(x,y,txt,fn,w)
        local b = Instance.new("TextButton", d)
        b.Position = UDim2.new(0,x,0,y)
                b.Size     = UDim2.new(0,140,0,30)
        b.Text     = txt
        b.Font     = Enum.Font.GothamBold
        b.TextSize = 18
        b.BackgroundColor3 = themes[currentTheme].btn
        b.TextColor3       = Color3.new(0,0,0)
        b.MouseButton1Click:Connect(fn)
    end

    makeBtn(50,  30, "Dupe Items", function()
        ItemRemote:FireServer()
        ItemStorageRemote:FireServer("ItemStorage1")
    end)
    makeBtn(200, 30, "Dupe Armors", function()
        ItemRemote:FireServer()
        BagStorageRemote:FireServer("BagStorage1")
    end)
    makeBtn(50, 100, "SumPresCoin", function()
        ReplicatedStorage:WaitForChild("RemoteEvents").ShenronRemote:FireServer("Be Rewarded")
    end)
    -- New SumArmor button
    makeBtn(200, 100, "SumArmor", function()
        ReplicatedStorage:WaitForChild("RemoteEvents").ShenronRemote:FireServer("Better Clothes")
    end)
end

-- Themes Tab
do
    local t,y = pages.Themes,10
    for nm,c in pairs(themes) do
        local b = Instance.new("TextButton", t)
        b.Position = UDim2.new(0,20,0,y)
        b.Size     = UDim2.new(0,320,0,24)
        b.Text     = nm
        b.Font     = Enum.Font.GothamBold
        b.TextSize = 12
        b.BackgroundColor3 = c.btn
        b.TextColor3       = (nm=="RGB" and Color3.new(0,0,0) or Color3.new(1,1,1))
        b.MouseButton1Click:Connect(function()
            currentTheme = nm
            player:SetAttribute("GuiTheme", nm)
            frame.BackgroundColor3    = c.bg
            minBtn.BackgroundColor3   = c.btn
            tabFrame.BackgroundColor3 = c.bg
            for _,btn in pairs(tabs) do btn.BackgroundColor3 = themes[currentTheme].btn end
        end)
        y=y+40
    end
end

-- Misc Tab (including Bounties)
do
    local m = pages["Misc."]
    -- Infinite Yield
    local iy=Instance.new("TextButton",m)
    iy.Position,iy.Size=UDim2.new(0,20,0,10),UDim2.new(0,100,0,30)
    iy.Text,iy.Font,iy.TextSize="InfYeild",Enum.Font.GothamBold,18
    iy.BackgroundColor3,iy.TextColor3=Color3.new(0,0,0),Color3.new(1,1,1)
    iy.MouseButton1Click:Connect(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
    end)

    -- Chest Hunt
    local ch=Instance.new("TextButton",m)
    ch.Position,ch.Size=UDim2.new(0,140,0,10),UDim2.new(0,100,0,30)
    ch.Text,ch.Font,ch.TextSize="Chest Hunt",Enum.Font.GothamBold,18
    ch.BackgroundColor3,ch.TextColor3=Color3.new(0,0,0),Color3.new(1,1,1)
    ch.MouseButton1Click:Connect(function()
      -- Timer for chest cooldown
if not chestTimerRunning then
    chestTimerRunning = true
    spawn(function()
        local timer = 602 -- 10m2s
        local timerLabel = Instance.new("TextLabel", frame)
        timerLabel.Size = UDim2.new(0,150,0,30)
        timerLabel.Position = UDim2.new(0,10,1,-40)       -- bottom-left of GUI
        timerLabel.Font = Enum.Font.GothamBold
        timerLabel.TextSize = 24
        timerLabel.TextColor3 = Color3.new(1,1,1)
        timerLabel.BackgroundTransparency = 1
        while timer > 0 do
            local m = math.floor(timer/60)
            local s = timer % 60
            timerLabel.Text = string.format("%02d:%02d", m, s)
            task.wait(1)
            timer = timer - 1
        end
        timerLabel:Destroy()

        -- Centered “Chest R Back!” notification
        local notify = Instance.new("TextLabel", screenGui)
        notify.Size = UDim2.new(0,400,0,100)
        notify.Position = UDim2.new(0.5,-200,0.5,-50)
        notify.Text = "Chest R Back!"
        notify.Font = Enum.Font.GothamBold
        notify.TextSize = 48
        notify.TextColor3 = Color3.new(1,1,1)
        notify.BackgroundTransparency = 1
        local outline = Instance.new("UIStroke", notify)
        outline.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
        outline.Color = Color3.new(0,0,0)
        outline.Thickness = 4
        task.wait(3)
        notify:Destroy()
    end)
end
        local hrp=player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end
        local origin=hrp.CFrame
        local list={}
        for _,o in ipairs(workspace:GetDescendants()) do
            if o:IsA("BasePart") and o.Name:lower():find("chest") then
                table.insert(list,o)
            end
        end
        table.sort(list,function(a,b)return a.Name<b.Name end)
        for _,c in ipairs(list) do hrp.CFrame=c.CFrame; task.wait(0.22) end
        hrp.CFrame=origin
    end)

    -- Mana Toggle
    local manaBtn=Instance.new("TextButton",m)
    manaBtn.Position,manaBtn.Size=UDim2.new(0,260,0,10),UDim2.new(0,80,0,30)
    manaBtn.Text,manaBtn.Font,manaBtn.TextSize="Mana",Enum.Font.GothamBold,18
    manaBtn.BackgroundColor3,manaBtn.TextColor3=Color3.new(0,0,0),Color3.new(1,1,1)
    manaBtn.MouseButton1Click:Connect(function()
        manaActive=not manaActive
        manaBtn.TextColor3=manaActive and Color3.new(0,1,0) or Color3.new(1,0,0)
    end)

    -- Clear Effects (toggle)
    local clrEffects = false
    local clrBtn = Instance.new("TextButton", m)
    clrBtn.Position, clrBtn.Size = UDim2.new(0, 20, 0, 50), UDim2.new(0, 100, 0, 30)
    clrBtn.Text, clrBtn.Font, clrBtn.TextSize = "Clr Effects", Enum.Font.GothamBold, 18
    clrBtn.BackgroundColor3, clrBtn.TextColor3 = Color3.new(0, 0, 0), Color3.new(1, 1, 1)
    clrBtn.MouseButton1Click:Connect(function()
        clrEffects = not clrEffects
        clrBtn.TextColor3 = clrEffects and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
        if clrEffects then
            -- remove Effects folder
            local ef = workspace:FindFirstChild("Effects")
            if ef then ef:Destroy() end
        else
            -- recreate Effects folder
            if not workspace:FindFirstChild("Effects") then
                local ef = Instance.new("Folder")
                ef.Name = "Effects"
                ef.Parent = workspace
            end
        end
    end)

    -- Particle Clear Toggle
    local clrPtcls = false
    local ptclBtn = Instance.new("TextButton",m)
    ptclBtn.Position,ptclBtn.Size = UDim2.new(0,140,0,50), UDim2.new(0,100,0,30)
    ptclBtn.Text,ptclBtn.Font,ptclBtn.TextSize = "ClrPTCL", Enum.Font.GothamBold, 18
    ptclBtn.BackgroundColor3, ptclBtn.TextColor3 = Color3.new(0,0,0), Color3.new(1,1,1)
    local ptclConn
    ptclBtn.MouseButton1Click:Connect(function()
        clrPtcls = not clrPtcls
        ptclBtn.TextColor3 = clrPtcls and Color3.new(0,1,0) or Color3.new(1,0,0)
        if clrPtcls then
            -- disable existing particles
            for _,obj in ipairs(workspace:GetDescendants()) do
                if obj:IsA("ParticleEmitter") then obj.Enabled = false end
            end
            -- listen for new particles
            ptclConn = workspace.DescendantAdded:Connect(function(desc)
                if desc:IsA("ParticleEmitter") then desc.Enabled = false end
            end)
        else
            -- re-enable previously disabled particles
            for _,obj in ipairs(workspace:GetDescendants()) do
                if obj:IsA("ParticleEmitter") then obj.Enabled = true end
            end
            if ptclConn then
                ptclConn:Disconnect()
                ptclConn = nil
            end
        end
    end)

    -- Bounties
    local bountyToggle=false
    local bountyBtn=Instance.new("TextButton",m)
    bountyBtn.Position = UDim2.new(0,260,0,50)
    bountyBtn.Size = UDim2.new(0,80,0,30)
    bountyBtn.Text,bountyBtn.Font,bountyBtn.TextSize="❌",Enum.Font.GothamBold,18
    bountyBtn.BackgroundColor3,bountyBtn.TextColor3=Color3.new(0,0,0),Color3.new(1,1,1)
    local bountyUI

    local function refreshBountyList()
        if not (bountyUI and bountyUI:FindFirstChild("Scroll")) then return end
        local scroll = bountyUI.Scroll
        scroll:ClearAllChildren()
        local uiList = Instance.new("UIListLayout", scroll)
        uiList.SortOrder,uiList.Padding = Enum.SortOrder.LayoutOrder,UDim.new(0,4)

        local list = {}
        for _,p in ipairs(Players:GetPlayers()) do
            local pv = p:FindFirstChild("PlayerValues")
            table.insert(list,{
                player = p,
                bounty = pv and pv:FindFirstChild("Bounty") and pv.Bounty.Value or 0,
                health = pv and pv:FindFirstChild("Health") and pv.Health.Value or 0,
            })
        end
        table.sort(list,function(a,b) return a.bounty>b.bounty end)

        for _,e in ipairs(list) do
            local p,ehealth,ebounty = e.player, e.health, e.bounty
            local row=Instance.new("Frame",scroll)
            row.Size=UDim2.new(1,0,0,24); row.BackgroundTransparency=1

            local nameLabel=Instance.new("TextLabel",row)
            nameLabel.Size=UDim2.new(0.7,0,1,0)
            nameLabel.Position=UDim2.new(0,0,0,0)
            nameLabel.Text=("%s | Health: %d"):format(p.DisplayName,ehealth)
            nameLabel.Font=Enum.Font.Gotham; nameLabel.TextSize=14
            nameLabel.TextColor3=Color3.new(1,1,1)
            nameLabel.BackgroundColor3=Color3.fromRGB(50,50,50)
            nameLabel.BackgroundTransparency=0.2
            nameLabel.TextXAlignment=Enum.TextXAlignment.Left
            Instance.new("UICorner",nameLabel).CornerRadius=UDim.new(0,4)

            local btn=Instance.new("TextButton",row)
            btn.Size=UDim2.new(0.3,0,1,0)
            btn.Position=UDim2.new(0.7,0,0,0)
            btn.Text=tostring(ebounty)
            btn.Font=Enum.Font.GothamBold; btn.TextSize=14
            btn.TextColor3=Color3.new(1,0,0)
            btn.BackgroundColor3=Color3.new(0,0,0)

            btn.MouseButton1Click:Connect(function()
                local char=p.Character
                if not char then return end
                local hrp_local = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                local hrp_target=char:FindFirstChild("HumanoidRootPart")
                if not hrp_local or not hrp_target then return end

                local tag="BountyOutline_"..p.Name
                local existing=char:FindFirstChild(tag)
                if existing then
                    existing:Destroy()

                    local a0=hrp_local:FindFirstChild("BountyTracerAttachment0")
                    if a0 then
                        local b=a0:FindFirstChild("BountyTracer")
                        if b then b:Destroy() end
                        a0:Destroy()
                    end
                    local a1=hrp_target:FindFirstChild("BountyTracerAttachment1")
                    if a1 then a1:Destroy() end
                else
                    -- highlight
                    local hl=Instance.new("Highlight")
                    hl.Name=tag
                    hl.FillTransparency=1
                    hl.OutlineTransparency=0
                    hl.OutlineColor=Color3.new(1,0,0)
                    hl.DepthMode=Enum.HighlightDepthMode.AlwaysOnTop
                    hl.Parent=char
                    hl.Adornee=char
                    hl:SetAttribute("Pulse",true)

                    -- tracer
                    local a0=Instance.new("Attachment",hrp_local)
                    a0.Name="BountyTracerAttachment0"
                    local a1=Instance.new("Attachment",hrp_target)
                    a1.Name="BountyTracerAttachment1"
                    local beam=Instance.new("Beam")
                    beam.Name="BountyTracer"
                    beam.Attachment0=a0
                    beam.Attachment1=a1
                    beam.Width0=0.2
                    beam.Width1=0.2
                    beam.Color=ColorSequence.new(Color3.new(1,0,0))
                    beam.FaceCamera=true
                    beam.LightEmission=1
                    beam.Parent=a0
                end
            end)
        end

        scroll.CanvasSize=UDim2.new(0,0,0, scroll.UIListLayout.AbsoluteContentSize.Y+5)
    end

    bountyBtn.MouseButton1Click:Connect(function()
        bountyToggle = not bountyToggle
        bountyBtn.Text = bountyToggle and "✅" or "❌"

        if bountyToggle then
            bountyUI = Instance.new("Frame", screenGui)
            bountyUI.Name     = "BountyUI"
            bountyUI.Size     = UDim2.new(0,250,0,200)
            bountyUI.Position = UDim2.new(0.5,-125,0.5,-100)
            bountyUI.BackgroundColor3 = Color3.fromRGB(35,35,35)
            bountyUI.Active   = true
            bountyUI.Draggable= true
            Instance.new("UICorner", bountyUI).CornerRadius = UDim.new(0,8)

            local scroll=Instance.new("ScrollingFrame",bountyUI)
            scroll.Name="Scroll"
            scroll.Size=UDim2.new(1,-10,1,-10)
            scroll.Position=UDim2.new(0,5,0,5)
            scroll.CanvasSize=UDim2.new(0,0,0,0)
            scroll.ScrollBarThickness=6
            scroll.BackgroundTransparency=1

            -- initial + 15s auto-refresh
            refreshBountyList()
            spawn(function()
                while bountyToggle and bountyUI and bountyUI.Parent do
                    task.wait(15)
                    refreshBountyList()
                end
            end)
        else
            if bountyUI then
                bountyUI:Destroy()
                bountyUI=nil
            end
            -- cleanup any remaining highlights/tracers
            for _,p in ipairs(Players:GetPlayers()) do
                local char=p.Character
                if char then
                    for _,c in ipairs(char:GetChildren()) do
                        if c:IsA("Highlight") and c.Name:match("^BountyOutline_") then
                            c:Destroy()
                        end
                    end
                    local hrp_t=char:FindFirstChild("HumanoidRootPart")
                    if hrp_t then
                        local a1=hrp_t:FindFirstChild("BountyTracerAttachment1")
                        if a1 then a1:Destroy() end
                    end
                end
            end
            local hrp_l=player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if hrp_l then
                local a0=hrp_l:FindFirstChild("BountyTracerAttachment0")
                if a0 then
                    local b=a0:FindFirstChild("BountyTracer")
                    if b then b:Destroy() end
                    a0:Destroy()
                end
            end
        end
    end)

    Players.PlayerAdded:Connect(refreshBountyList)
    Players.PlayerRemoving:Connect(refreshBountyList)
end

-- Drops Tab
do
    local d = pages.Drops
    local scroll = Instance.new("ScrollingFrame", d)
    scroll.Size               = UDim2.new(1,-20,1,-40)
    scroll.Position           = UDim2.new(0,10,0,10)
    scroll.BackgroundTransparency = 1
    scroll.ScrollBarThickness = 8
    local uiList = Instance.new("UIListLayout", scroll)
    uiList.SortOrder, uiList.Padding = Enum.SortOrder.LayoutOrder, UDim.new(0,5)

    local function refreshDrops()
        for _,c in ipairs(scroll:GetChildren()) do
            if c:IsA("Frame") then c:Destroy() end
        end
        local tools = {}
        if workspace:FindFirstChild("Drops") then
            for _,tool in ipairs(workspace.Drops:GetChildren()) do
                if tool:IsA("Tool") then
                    table.insert(tools,tool)
                end
            end
        end
        table.sort(tools,function(a,b)return a.Name:lower()<b.Name:lower() end)
        for _,tool in ipairs(tools) do
            local entry = Instance.new("Frame", scroll)
            entry.Size = UDim2.new(1,-10,0,30)
            entry.BackgroundTransparency = 1
            local nameLbl = Instance.new("TextLabel", entry)
            nameLbl.Size               = UDim2.new(0.7,0,1,0)
            nameLbl.Position           = UDim2.new(0,0,0,0)
            nameLbl.Text               = tool.Name
            nameLbl.Font               = Enum.Font.Gotham
            nameLbl.TextSize           = 14
            nameLbl.TextColor3         = Color3.new(1,1,1)
            nameLbl.TextXAlignment     = Enum.TextXAlignment.Left
            nameLbl.BackgroundColor3   = Color3.new(0,0,0)
            nameLbl.BackgroundTransparency = 0.9

            local btn = Instance.new("TextButton", entry)
            btn.Size           = UDim2.new(0.3,0,1,0)
            btn.Position       = UDim2.new(0.7,0,0,0)
            btn.Text           = "Get"
            btn.Font           = Enum.Font.GothamBold
            btn.TextSize       = 14
            btn.TextColor3     = Color3.new(1,1,1)
            btn.BackgroundColor3 = Color3.new(0,0,0)
            btn.MouseButton1Click:Connect(function()
                local handle = tool.PrimaryPart or tool:FindFirstChild("Handle") or tool:FindFirstChildWhichIsA("BasePart")
                local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                if handle and hrp then
                    firetouchinterest(handle,hrp,0)
                    task.wait(0.1)
                    firetouchinterest(handle,hrp,1)
                    refreshDrops()
                end
            end)
        end
        scroll.CanvasSize = UDim2.new(0,0,0, uiList.AbsoluteContentSize.Y+5)
    end

    refreshDrops()
    spawn(function()
        while true do
            task.wait(45)
            refreshDrops()
        end
    end)
end

-- Shrine Loop
spawn(function()
    while true do
        if shrine then
            local args = {
                [1] = Players:WaitForChild("CadenalexWho", 9e9),
                [2] = "SukunaFourth",
            }
            ReplicatedStorage:WaitForChild("SukunaAbilities", 9e9):FireServer(unpack(args))
        end
        task.wait(1.5)
    end
end)

-- Remote Loops
spawn(function()
    while true do
        if fireGun   then FireGunRemote:FireServer(false,Vector3.new(133,-9649,-2354),CFrame.new(133,-9649,-2354),1,Vector3.new(0,-5,0)) end
        task.wait(cooldown)
    end
end)
spawn(function()
    while true do
        if whiteBlow then WhiteBlowRemote:FireServer(false,Vector3.new(133,-9649,-2354),CFrame.new(133,-9649,-2354),1,Vector3.new(0,-5,0)) end
        task.wait(cooldown)
    end
end)
spawn(function()
    while true do
        if melee then BladeCombatRemote:FireServer(true,Vector3.new(-13834,-4105,-44845),CFrame.new(-13834,-4105,-44845)) end
        task.wait(cooldown)
    end
end)
spawn(function()
    while true do
        if manaActive then ManaChargeRemote:FireServer(true) else ManaChargeRemote:FireServer(false) end
        task.wait(cooldown)
    end
end)

-- Global GUI Toggle
UserInputService.InputBegan:Connect(function(input,gameProcessed)
    if not gameProcessed and input.KeyCode==Enum.KeyCode.LeftAlt then
        screenGui.Enabled = not screenGui.Enabled
    end
end)

-- Ensure GUI reopens if removed (e.g., on teleport)
Players.LocalPlayer.PlayerGui.ChildRemoved:Connect(function(child)
    if child.Name == screenGui.Name then
        -- re-parent the GUI back
        screenGui.Parent = player:WaitForChild("PlayerGui")
    end
end)

-- Goku Farm Loop
end)

-- Goku Farm Loop
spawn(function()
    while true do
        if gokuFarm then
            local live = workspace:FindFirstChild("Live")
            local hrp  = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if live and hrp then
                local uiGoku = live:FindFirstChild("Ultra Instinct Goku")
                if uiGoku and uiGoku.PrimaryPart then
                    hrp.CFrame = uiGoku.PrimaryPart.CFrame * CFrame.new(0,7,0)
                end
                local deadFlag = uiGoku:FindFirstChild("CharacterValues") and uiGoku.CharacterValues:FindFirstChild("dead")
                if deadFlag and deadFlag.Value then gokuFarm = false end
            end
            task.wait(0.01)
        else task.wait(1) end
    end
end)

-- Gon&Kill Farm Loop
spawn(function()
    local toggle = true
    while true do
        if gonKillFarm then
            local live = workspace:FindFirstChild("Live")
            local hrp  = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if live and hrp then
                local gon = live:FindFirstChild("Gon")
                local kil = live:FindFirstChild("Killua")
                local tgt = toggle and gon or kil
                toggle = not toggle
                if tgt and tgt.PrimaryPart then
                    hrp.CFrame = tgt.PrimaryPart.CFrame * CFrame.new(0,7,0)
                end
            end
            task.wait(0.5)
        else task.wait(1) end
    end
end)
